services:
  # KrakenD API Gateway service
  krakend:
    image: krakend:2.10.2
    restart: always
    ports:
      - "127.0.0.1:8000:8000"
    volumes:
      - ./docker/krakend:/etc/krakend
      - ./certs/krakend.crt:/etc/ssl/krakend.crt:ro
      - ./certs/krakend.key:/etc/ssl/krakend.key:ro
      - ./certs/ca.crt:/etc/ssl/ca.crt:ro
    command: ["run", "-c", "/etc/krakend/krakend.json"]
    networks:
      - app-network

volumes: {}

networks:
  app-network:
    external: true